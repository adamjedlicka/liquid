import { lazy, Match, Suspense, Switch } from 'solid-js'
import { useRouter } from 'liquid-js'

<%_ for (const page of pages) { _%>
const <%- page.name -%> = lazy(() => import('<%- page.component -%>'))
<%_ } _%>

export default () => {
  const { location } = useRouter()

  return (
    <Suspense>
      <Switch>
        <%_ for (const page of pages) { _%>
        <Match when={<%- page.path -%>.test(location())}>
          <<%- page.name -%> />
        </Match>
        <%_ } _%>
      </Switch>
    </Suspense>
  )
}
